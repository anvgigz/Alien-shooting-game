"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3830],{3830:function(a,b,c){c.d(b,{Z:function(){return $}});var d=c(41249),e=c(70184),f=c.n(e),g=c(15865),h=c(70079),i=c(10969),j=c(46951),k=c(15541),l=c(2794),m=c(20154),n=c(11753),o=c(83206),p=c(94276),q=c(66082),r=c(70030),s=c(28409),t=c(67908),u=c(75479),v=function(){var a,b=(0,u.E)(),c=(a=(0,d.Z)(f().mark(function a(c){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.post("/customer/renewal",(0,s.Z)({},c));case 2:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)});return(0,t.useMutation)(c)},w=c(17280),x=c(95003),y=c(13357),z=c(93833),A=c(38302),B=c(66162),C=c(49602),D=c(22056),E=c(71709),F=function(){var a,b=(0,u.E)(),c=(0,t.useQueryClient)(),e=(a=(0,d.Z)(f().mark(function a(c){var d,e;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=(0,s.Z)({},(0,E.c)("add-instrument"),c),a.next=3,b.post("/customer/payment/store-instrument",d);case 3:return e=a.sent.data,a.abrupt("return",e);case 5:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)});return(0,t.useMutation)(e,{onSuccess:(0,d.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.invalidateQueries(D.X.payment.all());case 2:case"end":return a.stop()}},a)}))})},G=c(75093),H=c(6614),I=(0,A.ZP)(z.Cvv)(function(){return{height:"35px",width:"30px"}}),J=(0,A.ZP)(z.CardNumber)(function(){return{height:"35px"}}),K=(0,A.ZP)(z.ExpiryDate)(function(){return{height:"35px",width:"50px"}}),L=function(a){var b,c=a.isOpen,e=a.hide,j=a.isAutoRenew,k=a.handleCancel,m=(0,h.useState)(function(){return(0,H.g)()}),n=m[0],o=n.resolve,p=n.reject,q=n.promise,r=(0,h.useState)(""),s=r[0],t=r[1],u=(0,h.useState)(""),v=u[0],w=u[1],x=(0,h.useState)(!1),y=x[0],A=x[1],D=(0,h.useState)(!1),E=D[0],L=D[1],M=(0,h.useState)(!1),N=M[0],O=M[1],P=(0,h.useState)(""),Q=P[0],R=P[1],S=(0,h.useState)(""),T=S[0],U=S[1],V=(0,B.Z)(),W=F(),X=(b=(0,d.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.Frames.submitCard();case 2:return a.abrupt("return",q.then(function(){var a=(0,d.Z)(f().mark(function a(b){var c,e,g,h;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.token,e=b.last4,g=b.expires_on,h=b.scheme,a.next=3,W.mutateAsync({token:c,last4:e,expiresOn:g,scheme:h||"",cardHolder:"".concat(s," ").concat(v)}).then(function(){var a=(0,d.Z)(f().mark(function a(b){var c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=b.redirectUrl,window.open(c,"_self");case 2:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()).catch(function(a){var b=a.message;console.error(b),i.ZP.error(b)});case 3:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()));case 3:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),Y=(0,g.BX)(z.Frames,{config:{debug:!0,publicKey:"pk_test_d74e2deb-d9b9-40bf-99f4-bec03299bada",localization:{cardNumberPlaceholder:"Card number",expiryMonthPlaceholder:"MM",expiryYearPlaceholder:"YY",cvvPlaceholder:"CVV"},cardholder:{name:"".concat(s," ").concat(v)},style:{invalid:{color:V.palette.error.main},base:{fontFamily:V.typography.body2.fontFamily,fontSize:V.typography.body2.fontSize,fontWeight:"400",color:V.palette.secondary.main,borderBottom:"1px solid rgba(0, 0, 0, 0.42)"}}},frameValidationChanged:function(a){var b=a.element,c=a.isValid;"card-number"===b?L(c):"cvv"===b?O(c):"expiry-date"===b&&A(c)},cardTokenized:function(a){o(a)},cardTokenizationFailed:function(a){var b=a.message,c=a.errorCode;p({message:b,name:c})},children:[(0,g.BX)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.tZ)(C.Z,{placeholder:"First name",variant:"standard",error:Boolean(Q),helperText:Boolean(Q)&&Q,sx:{marginRight:"5px",width:"100%"},onChange:function(a){var b=a.target.value;b.trim()?R(""):R("Must not be empty"),t(b)}}),(0,g.tZ)(C.Z,{placeholder:"Last name",variant:"standard",sx:{marginLeft:"5px",width:"100%"},error:Boolean(T),helperText:Boolean(T)&&T,onChange:function(a){var b=a.target.value;b.trim()?U(""):U("Must not be empty"),w(b)}})]}),(0,g.BX)(l.Z,{sx:{display:"flex"},children:[(0,g.tZ)(J,{sx:{marginRight:"10px"}}),(0,g.tZ)(K,{sx:{marginRight:"10px"}}),(0,g.tZ)(I,{})]})]});return(0,g.tZ)(g.HY,{children:(0,g.tZ)(G.Z,{isOpen:c,hide:e,isActionDisabled:!s||!v||!E||!N||!y,onAccept:X,actionTitle:"Add payment method",actionBtnText:"Save Credit Card",actionContent:Y,secondaryBtnText:"I Don't Have A Credit Card",onSecondaryAction:j?k:e})})},M=c(55535),N=c(75677),O=function(a){var b,c=a.isOpen,e=a.hide,h=(0,M.Z)(),i=(b=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=N.xj,a.next=3,h.mutateAsync().then(function(a){b=a.redirectUrl}).catch(function(a){var b=a.message;return console.error(b)}).finally(function(){window.open(b,"_blank"),e()});case 3:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),k=(0,g.tZ)(j.Z,{children:"To enable auto-renew without a credit card, please go to my.anydesk V1 and navigate to “License”."});return(0,g.tZ)(G.Z,{isOpen:c,hide:e,onAccept:i,actionTitle:"Enable Auto-Renew",actionBtnText:"Go to my.anydesk V1",actionContent:k,secondaryBtnText:"Return"})},P=c(5987),Q=c(82984),R=c(88099),S=c(58668),T=c(52708),U=c(29934),V=(0,h.memo)(function(){return(0,g.BX)(j.Z,{variant:"body2",children:["By deactivating the Auto-Renewal, your\xa0 subscription will be cancelled. \xa0You will still be able to use all its benefits until the last day of your subscription. \xa0",(0,g.tZ)(w.rU,{href:N.vf,target:"_blank",children:"Read more"})," ","about Auto-Renewal in our Knowledgebase."]})}),W=(0,h.memo)(function(){return(0,g.tZ)(j.Z,{variant:"body2",children:"In order to activate Auto-Renewal, it is necessary to set up a default payment method."})}),X=(0,h.memo)(function(a){var b=a.hasDefaultPaymentMethod;return(0,h.useMemo)(function(){return b?(0,g.tZ)(V,{}):(0,g.tZ)(W,{})},[b])}),Y=function(a){var b=a.autoRenew,c=a.hasDefaultPaymentMethod,d=a.subscription,e=a.onChange,f=(0,h.useState)(U.Ob.AUTORENEW_DISABLED),i=f[0],j=f[1],m=(0,h.useState)(!1),n=m[0],o=m[1];return(0,h.useEffect)(function(){if(d){var a,e=d.subscriptionEndDate,f=d.isActive,g=!!d&&!!(a=d.tags)&&["pnf","forbid-autorenewal"].some(function(b){return a.includes(b)});o(!c||g),j(""),!1===f&& !1===b&&j(U.Ob.AUTORENEW_INVOICE_OVERDUE);var h=(0,T.aQ)(e);h<=30&& !0!==b&&j(U.Ob.AUTORENEW_ONLY_ENABLE),h<=30&& !0===b&&j(U.Ob.AUTORENEW_EXPIRES_SOON),h<=2&&j(U.Ob.AUTORENEW_TOO_CLOSE)}else j(U.Ob.AUTORENEW_DISABLED),o(!0)},[b,i,d]),(0,g.tZ)(k.Z,{title:i,children:(0,g.tZ)(l.Z,{children:(0,g.tZ)(w.ZD,{sx:{mx:1.5},name:"AutoRenewSwitch",disabled:n,onChange:e,checked:b})})})},Z=function(a){var b=a.paymentData,c=a.subscription,e=a.autoDebit,j=(0,h.useState)(!1),k=j[0],l=j[1];(0,h.useEffect)(function(){e&&l(e)},[e]);var p,q,s=(0,Q.L)(),t=s.isInstanceAdmin,u=s.license,x=c.subscriptionId,z=c.subscriptionName,A=c.subscriptionStartDate,B=c.subscriptionEndDate,C=c.subscriptionStatus,D=c.expirationDate,E=c.subscriptionCurrency,F=c.subscriptionTotalAmount,G=c.netsuiteCustomerId,H=c.tags,I=(0,P.Z)(L),J=I.dialog,K=I.show,M=I.hide,T=(0,P.Z)(O),U=T.dialog,V=T.show,W=(b||{}).id,Z=v(),$=(p=(0,d.Z)(f().mark(function a(b){var c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l(b),c=Z.mutateAsync({autoRenewal:b}),a.next=4,i.ZP.promise(c,{loading:(0,g.tZ)(y.Z,{layout:"circular"}),success:"Auto-Renew updated",error:function(a){return a.message}}).catch(function(){return l(!b)});case 4:case"end":return a.stop()}},a)})),function(a){return p.apply(this,arguments)}),_=function(){M(),V()},aa=(q=(0,d.Z)(f().mark(function a(b){var c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!((c=b.target.checked)&&!W)){a.next=7;break}return a.next=4,(0,S._)(N.EY,"Frames");case 4:K({isAutoRenew:!0,handleCancel:_}),a.next=8;break;case 7:$(c);case 8:case"end":return a.stop()}},a)})),function(a){return q.apply(this,arguments)}),ab=null==H?void 0:H.includes("pnf");return(0,g.BX)(m.Z,{children:[(0,g.tZ)(n.Z,{title:"Subscription"}),(0,g.tZ)(o.Z,{children:(0,g.BX)(w.rA,{children:[!u.isTrial&&(0,g.tZ)(w.VT,{label:"Auto-Renew",tooltip:(0,g.tZ)(X,{hasDefaultPaymentMethod:!!b}),action:(0,g.tZ)(Y,{subscription:c,hasDefaultPaymentMethod:!!b,onChange:aa,autoRenew:k})}),(0,g.tZ)(w.VT,{label:"Contract ID",value:x}),t&&(0,g.tZ)(w.VT,{label:"Subscription Name",value:z||(0,g.tZ)("em",{children:"not set"})}),t&&(0,g.tZ)(w.VT,{label:"Customer Record",value:G||(0,g.tZ)("em",{children:"unknown"}),href:G?"superadmin/customers/".concat(G):void 0}),(0,g.tZ)(w.VT,{label:"Start date",value:(0,g.tZ)(w.ou,{dateStyle:"short",children:A})}),(0,g.tZ)(w.VT,{label:"End date",value:(0,g.tZ)(w.ou,{dateStyle:"short",children:B})}),(0,g.tZ)(w.VT,{label:"Status",value:(0,g.tZ)(r.y,{value:C})}),!ab&&(0,g.tZ)(w.VT,{label:"Price",value:"".concat(F," ").concat((0,R.N)(E))}),(0,g.tZ)(w.VT,{label:"Renewal date",value:(0,g.tZ)(w.ou,{dateStyle:"short",children:D})})]})}),J,U]})},$=function(a){var b=a.subscriptions,c=a.paymentData,d=a.autoDebit;return b?void 0===b.items[0]?(0,g.tZ)(x.Z,{title:"Subscription",message:U.nR.PROBLEM_WHILE_LOADING("subscription information"),action:(0,g.tZ)(p.Z,{sx:{ml:"auto"},href:"mailto:support@anydesk.com",children:"Contact support"})}):1===b.items.length?(0,g.tZ)(Z,{subscription:b.items[0],autoDebit:d,paymentData:c}):(0,g.tZ)(q.ZP,{container:!0,spacing:1,children:b.items.map(function(a){return(0,g.tZ)(q.ZP,{item:!0,children:(0,g.tZ)(Z,{subscription:a,autoDebit:d,paymentData:c})})})}):(0,g.tZ)(g.HY,{})}},70030:function(a,b,c){c.d(b,{y:function(){return g}});var d=c(15865),e=c(17280),f={ACTIVE:{text:"Active",color:"green",icon:"check"},PENDING_ACTIVATION:{text:"Pending",color:"blue",icon:"info"},DRAFT:{text:"Draft",color:"gray",icon:"error"},CLOSED:{text:"Closed",color:"red",icon:"error"},TERMINATED:{text:"Terminated",color:"red",icon:"error"},CANCELLED:{text:"Cancelled",color:"red",icon:"cancel"},SUSPENDED:{text:"Suspended",color:"orange",icon:"error"}},g=function(a){var b=f[a.value],c=b.text,g=b.color,h=b.icon;return(0,d.tZ)(e.om,{label:c,color:g,icon:h})}},88099:function(a,b,c){c.d(b,{N:function(){return e}});var d={EUR:"€",USD:"$",CAD:"CAD",HKD:"HKD",AUD:"AUD",CRC:"₡",CNY:"\xa5",GBP:"\xa3",ILS:"₪",INR:"₹",JPY:"\xa5",KRW:"₩",NGN:"₦",PHP:"₱",PLN:"zł",PYG:"₲",THB:"฿",UAH:"₴",VND:"₫",CHF:"CHf",BRL:"R$"};function e(a){return d[a]||a}},58668:function(a,b,c){c.d(b,{"_":function(){return i},a:function(){return h}});var d=c(41249),e=c(70184),f=c.n(e),g=c(6614);function h(a,b){var c=document.createElement("a");document.body.appendChild(c),c.setAttribute("style","display: none");var d=URL.createObjectURL(a);c.href=d,c.download=b,c.click(),URL.revokeObjectURL(d)}function i(a,b){return j.apply(this,arguments)}function j(){return(j=(0,d.Z)(f().mark(function a(b,c){var d,e,h,i,j;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=(d=(0,g.g)()).resolve,h=d.reject,i=d.promise,window[c]?e(!0):((j=document.createElement("script")).onload=function(){e(!0)},j.onerror=function(){h({name:"Script loading",message:"Failed to load script from uri"})},j.src=b,document.head.appendChild(j)),a.abrupt("return",i);case 3:case"end":return a.stop()}},a)}))).apply(this,arguments)}}}])