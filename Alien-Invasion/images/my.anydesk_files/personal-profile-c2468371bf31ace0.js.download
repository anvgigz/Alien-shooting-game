(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7300],{10776:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/personal-profile",function(){return c(90430)}])},86852:function(a,b,c){"use strict";c.d(b,{Z:function(){return j}});var d=c(41249),e=c(70184),f=c.n(e),g=c(67908),h=c(22056),i=c(75479);function j(a){var b,c=(0,i.E)(),e=(b=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.get("/customer");case 2:return b=a.sent.data,a.abrupt("return",b);case 4:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)});return(0,g.useQuery)(h.X.billing.details(),e,a)}},90430:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return N}});var d=c(15865),e=c(282),f=c.n(e),g=c(89411),h=c(76509),i=c(17280),j=c(36516),k=c(13357),l=c(56901),m=c(41249),n=c(70184),o=c.n(n),p=c(70079),q=c(10969),r=c(46951),s=c(25222),t=c(83065),u=c(14508),v=c(86852),w=c(90645),x=c(92752),y=c(82984),z=function(a){var b,c=a.isOpen,e=a.hide,f=(0,p.useState)(!1),g=f[0],h=f[1],j=(0,y.L)().isCustomer,l=(0,u.Z)(),n=(0,x.Z)(),z=(0,v.Z)({enabled:j,initialData:j?void 0:null}),A=z.data,B=z.isLoading,C=(b=(0,m.Z)(o().mark(function a(){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.mutateAsync({userId:"me",onSuccess:(0,m.Z)(o().mark(function a(){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",n());case 1:case"end":return a.stop()}},a)}))}).catch(function(a){var b=a.message;q.ZP.error(b)});case 2:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),D=B?(0,d.tZ)(k.Z,{layout:"circular"}):(0,d.BX)(d.HY,{children:[(0,d.tZ)(r.Z,{mb:2,variant:"body2",children:"You are about to delete your user account. Do you want to proceed?"}),(null==A?void 0:A.autoDebit)?(0,d.tZ)(r.Z,{mb:2,variant:"body2",color:w.yw,children:"Note: To delete your user account, please remove all payment information first. This will also cancel auto-renewal."}):(0,d.BX)(d.HY,{children:[(0,d.tZ)(r.Z,{mb:2,variant:"body2",color:w.yw,children:"Warning: After deletion your license can not be accessed anymore. This process can only be reversed in the next 60 days."}),(0,d.tZ)(s.Z,{sx:{display:"flex",alignItems:"center"},control:(0,d.tZ)(t.Z,{checked:g,onChange:function(a){return h(a.target.checked)}}),label:(0,d.tZ)(r.Z,{variant:"body2",children:"I understand that this is not reversible and I want to proceed anyway"})})]})]});return(0,d.tZ)(i.dm,{isOpen:c,hide:e,onAccept:C,actionTitle:"Delete User",actionContent:D,isActionDisabled:!g||(null==A?void 0:A.autoDebit),actionBtnText:"Delete"})},A=z,B=c(92182),C=c.n(B),D=c(67908),E=c(22056),F=c(75479),G=c(4825),H=function(a){var b,c,e,f,g,h=a.isOpen,j=a.hide,k=(0,G.Z)(),l=k.data,n=(b=(0,D.useQueryClient)(),c=(0,F.E)(),f=(e=(0,m.Z)(o().mark(function a(){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.post("/team/leave");case 2:case"end":return a.stop()}},a)})),function(){return e.apply(this,arguments)}),(0,D.useMutation)(f,{onSuccess:(0,m.Z)(o().mark(function a(){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",b.invalidateQueries(E.X.team.all()));case 1:case"end":return a.stop()}},a)}))})),p=(0,d.BX)(d.HY,{children:[(0,d.BX)(r.Z,{mb:2,variant:"body2",children:["Do you really want to leave the team",(null==l?void 0:l.name)?(0,d.tZ)("strong",{children:" ".concat(null==l?void 0:l.name,"?")}):"?"]}),(0,d.BX)(r.Z,{mb:2,variant:"body2",color:w.yw,children:[(0,d.tZ)("strong",{children:"Note:"})," By leaving the team you will lose access to all its resources."]})]}),s=(g=(0,m.Z)(o().mark(function a(){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.mutateAsync().then(function(){C().reload(),q.ZP.success("Team left successfully")}).catch(function(a){var b=a.message;q.ZP.error(b)});case 2:case"end":return a.stop()}},a)})),function(){return g.apply(this,arguments)});return(0,d.tZ)(i.dm,{isOpen:h,hide:j,onAccept:s,actionTitle:"Leave Team",actionContent:p,actionBtnText:"Leave Team"})},I=c(8672),J=c(5987),K=c(71588),L=f()(function(){return c.e(756).then(c.bind(c,20756))},{loadableGenerated:{webpack:function(){return[20756]}}}),M=function(){var a=(0,y.L)(),b=a.api,c=a.isTeamOwner,e=a.isDefaultOrg,f=(0,h.Z)(),j=f.data,m=f.isLoading,n=f.error,o=(0,J.Z)(H),p=o.dialog,q=o.show,r=(0,J.Z)(A),s=r.dialog,t=r.show;if(!b.users.self.read)throw new K.ForbiddenError;if(m)return(0,d.tZ)(k.Z,{layout:"detail"});if(n)throw n;if(!j)throw Error("Personal profile page error: no data");return(0,d.BX)(L,{children:[(0,d.tZ)(i.mr,{title:"My Profile",children:(0,d.tZ)(l.Z,{items:[{title:"Leave Team",isHidden:!j.teamId||c,onClick:function(){return q()},icon:(0,d.tZ)(g.Icons.TeamLeave,{}),color:"primary"},{title:"Delete User Account",isHidden:!!j.organizationId&&!e,onClick:function(){return t()},icon:(0,d.tZ)(g.Icons.UserRemove,{}),color:"primary"},]})}),(0,d.tZ)(I.Z,{userData:j}),p,s]})};M.Layout=j.default;var N=M}},function(a){a.O(0,[3457,119,1418,7848,7390,5734,3738,7457,9792,6967,4100,5507,264,7280,6516,9711,2406,5728,5210,9774,2888,179],function(){var b;return a(a.s=10776)}),_N_E=a.O()}])